# Migration `20200202115214-even-more-new-app`

This migration has been generated by SeanCottrill at 2/2/2020, 11:52:14 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "lift"."new_Application" (
  "applicationDate" DATE NOT NULL DEFAULT '1970-01-01 00:00:00'  ,
  "applicationID" TEXT NOT NULL   ,
  "program" TEXT NOT NULL   REFERENCES "Program"(id) ON DELETE RESTRICT,
  "status" TEXT NOT NULL DEFAULT 'pending'  ,
  "user" TEXT NOT NULL   REFERENCES "User"(id) ON DELETE RESTRICT,
  PRIMARY KEY ("applicationID")
);

INSERT INTO "new_Application" ("applicationDate","applicationID","status") SELECT "applicationDate","applicationID","status" from "Application"

DROP TABLE "lift"."Application";

ALTER TABLE "lift"."new_Application" RENAME TO "Application";

PRAGMA "lift".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20200202114737-new-app-again..20200202115214-even-more-new-app
--- datamodel.dml
+++ datamodel.dml
@@ -1,14 +1,14 @@
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url      = "file:dev.db"
   enabled  = true
 }
 // This is used in prod
 // datasource db {
 //   provider = "mysql"
-     url = "***"
+//   url      = env("MYSQL_URL")
 //   default  = true
 // }
 generator photon {
@@ -85,9 +85,9 @@
 }
 model Application {
   applicationID       String               @default(cuid()) @id
-  userID              User
-  programID           Program
+  user                User
+  program             Program
   status              ApplicationStatus 
   applicationDate     DateTime             @default(now())
 }
```

## Photon Usage

You can use a specific Photon built for this migration (20200202115214-even-more-new-app)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20200202115214-even-more-new-app'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
